{"version":3,"file":"loginController.iife.min.js","sources":["../polyfills/console.js","../utilities/ajaxFormClientSideValidate.js","../views/login.js","../views/validators/LoginValidatorView.js","../views/utilities/AlertDialog.js","../form-validators/LoginValidator.js","../views/validators/EmailValidatorView.js","../form-validators/EmailValidator.js","loginController.js"],"sourcesContent":["// No-op shim for Opera 9 and IE 5.5 (needed per `eslint-plugin-compat`)\nconst consoleShim = typeof console === 'undefined'\n  ? {}\n  : console;\n\nconst noop = () => {\n  // No-op\n};\n\n['error', 'log'].forEach((prop) => {\n  if (!consoleShim[prop]) {\n    consoleShim[prop] = noop;\n  }\n});\n\nexport default consoleShim;\n","/* globals $, Nogin */\n\n// Note: This per-request approach suffers from the possibility that the\n//   may subsequently open a page from the site with nogin in another tab\n//   where that page sets a new, different token meta expectation to a\n//   new value and this will thereby become invalid.\nconst xsrfCookie = $('meta[name=\"csrf-token\"]').attr('content');\n\nconst ajaxFormClientSideValidate = (form, {\n  validate,\n  // `ajaxForm` properties and methods\n  url,\n  beforeSubmit,\n  success,\n  error,\n  checkXSRF = true\n}) => {\n  // As per problem #3 at https://www.html5rocks.com/en/tutorials/forms/constraintvalidation/#toc-current-implementation-issues ,\n  //  we can't do the validation at submit, so we instead add a capturing\n  //  change listener as well as input listeners to reset the messages;\n  //  note that we can't use the `invalid` event to call `reportValidity`\n  //  after our `setCustomValidity()` (to ensure we get the bubbles showing)\n  //  as that fires further `invalid` events; and setting the form to\n  //  `novalidate` won't show the bubbles.\n  form[0].addEventListener('change', (e) => {\n    // Provide custom messages of invalidity\n    validate(e);\n  }, true);\n\n  form[0].addEventListener('input', ({target: field}) => {\n    field.setCustomValidity('');\n    field.checkValidity('');\n  }, true);\n\n  // istanbul ignore if\n  if (checkXSRF && !xsrfCookie && !Nogin.disableXSRF) {\n    error({responseText: 'UnknownError'});\n    return;\n  }\n\n  form.ajaxForm({\n    headers: {\n      // `$.ajaxForm` will auto-check for special `meta` tags to add XSRF\n      //   data, but we avoid the extra meta it requires by sending on the\n      //   header.\n      'X-XSRF-Token': xsrfCookie\n    },\n    url,\n    beforeSubmit,\n    success,\n    error\n  });\n};\n\nexport default ajaxFormClientSideValidate;\n","/* globals $, Nogin */\n\nconst LoginView = {\n  /**\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  getInputForInitialFocus () {\n    return $('input:text:visible:first');\n  },\n  /**\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  getLoginModal () {\n    return $('#login');\n  },\n\n  /**\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  retrievePasswordModal () {\n    const retrievePasswordModal = $('#retrieve-password');\n    retrievePasswordModal.modal({\n      show: false, keyboard: true, backdrop: true\n    });\n    return retrievePasswordModal;\n  },\n\n  /**\n   * @param {external:jQuery} retrievePasswordModal `HTMLDivElement`\n   * @returns {external:jQuery} `HTMLFormElement`\n   */\n  retrievePasswordForm (retrievePasswordModal) {\n    return retrievePasswordModal.find('#retrieve-password-form');\n  },\n\n  /**\n   * @returns {external:jQuery} `HTMLFormElement`\n   */\n  getLoginForm () {\n    return $('[data-name=login] form');\n  },\n\n  /**\n   * @param {external:jQuery} retrievePasswordModal `HTMLDivElement`\n   * @returns {external:jQuery} `HTMLButtonElement`\n   */\n  retrievePasswordSubmit (retrievePasswordModal) {\n    return retrievePasswordModal.find('[data-name=retrieve-password-submit]');\n  },\n\n  /**\n   * @param {external:jQuery} retrievePasswordModal `HTMLDivElement`\n   * @returns {external:jQuery} `HTMLButtonElement`\n   */\n  retrievePasswordCancel (retrievePasswordModal) {\n    return retrievePasswordModal.find('[data-name=retrieve-password-cancel]');\n  },\n\n  /**\n   * @param {external:jQuery} retrievePasswordModal `HTMLDivElement`\n   * @returns {external:jQuery} `HTMLInputElement`\n   */\n  retrieveLostPasswordEmail (retrievePasswordModal) {\n    return retrievePasswordModal.find('[data-name=\"email\"]');\n  },\n\n  /**\n   * @param {external:jQuery} loginModal `HTMLDivElement`\n   * @returns {external:jQuery} `HTMLInputElement`\n   */\n  getLostPasswordUsername (loginModal) {\n    return loginModal.find('[data-name=\"user\"]');\n  },\n\n  /**\n   * @param {external:jQuery} loginModal\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  getForgotPassword (loginModal) {\n    return loginModal.find('[data-name=\"forgot-password\"]');\n  },\n\n  /**\n  * @param {external:jQuery} loginModal\n  * @returns {external:jQuery} `HTMLButtonElement`\n  */\n  getRememberMeButton (loginModal) {\n    return loginModal.find('button.remember-me');\n  },\n\n  /**\n  * @param {external:jQuery} loginModal\n  * @returns {boolean}\n  */\n  isRememberMeChecked (loginModal) {\n    return this.getRememberMeButton(loginModal).find('span').hasClass(\n      'fa-check-square'\n    );\n  },\n\n  /**\n  * @param {external:jQuery} retrievePasswordModal `HTMLDivElement`\n  * @returns {void}\n  */\n  setRetrievePasswordCancel (retrievePasswordModal) {\n    return this.retrievePasswordCancel(retrievePasswordModal).text(\n      Nogin._('Cancel')\n    );\n  },\n\n  /**\n  * @param {external:jQuery} loginModal\n  * @returns {void}\n  */\n  toggleCheckSquare (loginModal) {\n    const span = this.getRememberMeButton(loginModal).find('span');\n    // todo[cypress@>9.0.0]: class checking: remove this disabling of\n    //   istanbul to see if fixed\n    // istanbul ignore if\n    if (span.hasClass('fa-minus-square')) {\n      span.removeClass('fa-minus-square')\n        .addClass('fa-check-square');\n    } else {\n      span.addClass('fa-minus-square')\n        .removeClass('fa-check-square');\n    }\n  },\n\n  /**\n   * @param {external:jQuery} retrievePasswordModal `HTMLDivElement`\n   * @returns {void}\n   */\n  switchConfirmToAlert (retrievePasswordModal) {\n    this.retrievePasswordCancel(retrievePasswordModal).text('OK');\n  }\n};\n\nexport default LoginView;\n","/* globals $, Nogin */\n\nconst {_} = Nogin;\n\n/**\n* @typedef {PlainObject} LoginInfoElements\n* @property {external:jQuery} name\n* @property {external:jQuery} pass\n*/\n\nconst LoginValidatorView = {\n  /**\n   * @returns {LoginInfoElements}\n   */\n  getFormFields () {\n    return {\n      user: $('[data-name=\"user\"]')[0],\n      pass: $('[data-name=\"pass\"]')[0]\n    };\n  },\n\n  errorMessages: {\n    PleaseEnterValidUserName: _('PleaseEnterValidUserName'),\n    PleaseEnterValidPassword: _('PleaseEnterValidPassword'),\n    LoginFailure: _('LoginFailure'),\n    PleaseCheckYourUserNameOrPassword: _('PleaseCheckYourUserNameOrPassword'),\n    MismatchUserDataFormat: _('MismatchUserDataFormat')\n  },\n\n  messages: {\n    LinkToResetPasswordMailed: _('LinkToResetPasswordMailed'),\n    EmailNotFound: _('EmailNotFound'),\n    ProblemTryAgainLater: _('ProblemTryAgainLater')\n  }\n};\n\nexport default LoginValidatorView;\n","/* globals $ */\n\nconst AlertDialog = {\n  /**\n   * @param {PlainObject} cfg\n   * @param {string} cfg.heading\n   * @param {external:jQuery} cfg.body\n   * @param {boolean} cfg.keyboard\n   * @param {boolean|\"static\"} cfg.backdrop\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  populate ({\n    heading,\n    body,\n    keyboard,\n    backdrop\n  }) {\n    const modal = $('[data-name=modal-alert]').modal({\n      show: false, keyboard, backdrop\n    });\n    $('[data-name=modal-alert] .modal-header [data-name=modal-title]').text(\n      heading\n    );\n    $('[data-name=modal-alert] [data-name=modal-body] p').empty().append(body);\n    $('[data-name=modal-alert] button').click((e) => {\n      e.preventDefault();\n      modal.modal('hide');\n    });\n    return modal;\n  }\n};\n\nexport default AlertDialog;\n","import AlertDialog from '../views/utilities/AlertDialog.js';\nimport LoginValidatorView from '../views/validators/LoginValidatorView.js';\n\nconst {user, pass} = LoginValidatorView.getFormFields();\n\n/**\n * Login validation.\n */\nconst LoginValidator = {\n  /**\n   * @returns {boolean}\n   */\n  validateForm () {\n    if (user.validity.valueMissing) {\n      user.setCustomValidity(\n        LoginValidatorView.errorMessages.PleaseEnterValidUserName\n      );\n      user.form.reportValidity();\n      return false;\n    }\n    if (pass.validity.valueMissing) {\n      pass.setCustomValidity(\n        LoginValidatorView.errorMessages.PleaseEnterValidPassword\n      );\n      pass.form.reportValidity();\n      return false;\n    }\n    return true;\n  },\n\n  /**\n  * Bind a simple alert window to this controller to display any errors.\n  * @param {string} msg\n  * @returns {void}\n  */\n  showLoginError (msg) {\n    const loginErrors = AlertDialog.populate({\n      heading: LoginValidatorView.errorMessages.LoginFailure,\n      body: msg\n        ? LoginValidatorView.errorMessages[msg]\n        : LoginValidatorView.errorMessages.PleaseCheckYourUserNameOrPassword,\n      keyboard: true,\n      backdrop: true\n    });\n    loginErrors.modal('show');\n  }\n};\n\nexport default LoginValidator;\n","/* globals $, Nogin */\n\n/**\n* @typedef {PlainObject} EmailInfoElements\n* @property {external:jQuery} name\n* @property {external:jQuery} email\n* @property {external:jQuery} user\n* @property {external:jQuery} pass\n*/\n\nconst EmailValidatorView = {\n  /**\n   * @returns {AccountInfoElements}\n   */\n  getFormFields () {\n    return {\n      retrievePasswordModal: $('#retrieve-password'),\n      retrievePasswordAlert: $('#retrieve-password [data-name=alert]'),\n      retrievePasswordForm: $('#retrieve-password #retrieve-password-form')\n    };\n  },\n\n  /**\n   * @param {string} msg\n   */\n  addSuccess (msg) {\n    const {retrievePasswordAlert} = this.getFormFields();\n    retrievePasswordAlert.attr('class', 'alert alert-success');\n    retrievePasswordAlert.text(msg);\n  },\n\n  messages: {\n    PleaseEnterValidEmailAddress: Nogin._('PleaseEnterValidEmailAddress')\n  }\n};\n\nexport default EmailValidatorView;\n","import EmailValidatorView from '../views/validators/EmailValidatorView.js';\n\n/**\n * Validator for email addresses.\n */\nconst EmailValidator = class EmailValidator {\n  /**\n   * @param {HTMLInputElement} input Email input element\n   * @returns {boolean} Whether valid\n   */\n  static validateEmail (input) {\n    input.setCustomValidity('');\n    if (input.validity.patternMismatch) {\n      input.setCustomValidity(\n        EmailValidatorView.messages.PleaseEnterValidEmailAddress\n      );\n    }\n    return input.form.reportValidity();\n  }\n\n  /**\n   * Sets up properties and events.\n   */\n  constructor () {\n    const {\n      retrievePasswordModal, retrievePasswordAlert, retrievePasswordForm\n    } = EmailValidatorView.getFormFields();\n\n    retrievePasswordModal.on('show.bs.modal', () => {\n      retrievePasswordForm.resetForm();\n      retrievePasswordAlert.hide();\n    });\n\n    this.retrievePasswordAlert = retrievePasswordAlert;\n  }\n\n  /**\n   * @param {string} msg The message\n   * @returns {void}\n   */\n  showEmailAlert (msg) {\n    EmailValidatorView.addSuccess(msg);\n    this.retrievePasswordAlert.show();\n  }\n\n  /**\n   * @returns {void}\n   */\n  hideEmailAlert () {\n    this.retrievePasswordAlert.hide();\n  }\n\n  /**\n   * @param {string} msg The message\n   * @returns {void}\n   */\n  showEmailSuccess (msg) {\n    EmailValidatorView.addSuccess(msg);\n    this.retrievePasswordAlert.fadeIn(500);\n  }\n};\n\nexport default EmailValidator;\n","/* globals Nogin */\n\nimport '../polyfills/console.js';\nimport ajaxFormClientSideValidate from\n  '../utilities/ajaxFormClientSideValidate.js';\nimport LoginView from '../views/login.js';\nimport LoginValidatorView from '../views/validators/LoginValidatorView.js';\nimport LoginValidator from '../form-validators/LoginValidator.js';\nimport EmailValidator from '../form-validators/EmailValidator.js';\n\nconst loginModal = LoginView.getLoginModal();\nconst loginForm = LoginView.getLoginForm();\nconst forgotPassword = LoginView.getForgotPassword(loginModal);\nconst rememberMeButton = LoginView.getRememberMeButton(loginModal);\nconst lostPasswordUsername = LoginView.getLostPasswordUsername(loginModal);\n\nconst retrievePasswordModal = LoginView.retrievePasswordModal();\n\nconst retrievePasswordEmail = LoginView.retrieveLostPasswordEmail(\n  retrievePasswordModal\n);\nconst retrievePasswordForm = LoginView.retrievePasswordForm(\n  retrievePasswordModal\n);\nconst retrievePasswordSubmit = LoginView.retrievePasswordSubmit(\n  retrievePasswordModal\n);\n\n// bind event listeners to button clicks\nretrievePasswordSubmit.click(() => {\n  retrievePasswordForm.submit();\n});\nforgotPassword.click(() => {\n  const retrievePasswordCancel = LoginView.setRetrievePasswordCancel(\n    retrievePasswordModal\n  );\n\n  // This isn't always happening automatically\n  retrievePasswordCancel.click(() => {\n    retrievePasswordModal.modal('hide');\n    setTimeout(() => {\n      lostPasswordUsername.focus();\n    });\n  });\n\n  retrievePasswordSubmit.show();\n  retrievePasswordModal.modal('show');\n});\n\n// automatically toggle focus between the email modal window and\n//   the login form\nretrievePasswordModal.on('shown.bs.modal', () => {\n  retrievePasswordEmail.focus();\n});\n/*\n// This was not consistently triggering in Cypress, so added click\n//    listener above to do the focusing\nretrievePasswordModal.on('hide.bs.modal', () => {\n  lostPasswordUsername.focus();\n});\n*/\n\najaxFormClientSideValidate(\n  loginForm,\n  {\n    validate () {\n      LoginValidator.validateForm();\n    },\n    beforeSubmit (formData, jqForm, options) {\n      /*\n      // Doesn't get here; see comment above on validation\n      if (!LoginValidator.validateForm()) {\n        return false;\n      }\n      */\n      // append 'remember-me' option to formData to write local cookie\n      formData.push({\n        name: 'remember-me',\n        value: LoginView.isRememberMeChecked(loginModal)\n      });\n      return true;\n    },\n    success (responseText, status, xhr, $form) {\n      // \"nocontent\" (204), \"notmodified\" (304), \"parseerror\" (JSON or XML)\n      // istanbul ignore else\n      if (status === 'success') {\n        Nogin.redirect('home');\n      }\n    },\n    error (e) {\n      switch (e.responseText) {\n      case 'unexpected-pass-version-error':\n        LoginValidator.showLoginError('MismatchUserDataFormat');\n        break;\n      default:\n        LoginValidator.showLoginError();\n        break;\n      }\n    }\n  }\n);\n\nLoginView.getInputForInitialFocus().focus();\nrememberMeButton.click(function () {\n  LoginView.toggleCheckSquare(loginModal);\n});\n\n// login retrieval form via email\nconst ev = new EmailValidator();\n\najaxFormClientSideValidate(\n  retrievePasswordForm,\n  {\n    validate () {\n      const emailInput = retrievePasswordEmail[0];\n      if (EmailValidator.validateEmail(emailInput)) {\n        ev.hideEmailAlert();\n      }\n    },\n    url: Nogin.Routes.lostPassword,\n    success (responseText, status, xhr, $form) {\n      LoginView.switchConfirmToAlert(retrievePasswordModal);\n      retrievePasswordSubmit.hide();\n      ev.showEmailSuccess(\n        LoginValidatorView.messages.LinkToResetPasswordMailed\n      );\n    },\n    error (e) {\n      if (e.responseText === 'email-not-found') {\n        ev.showEmailAlert(LoginValidatorView.messages.EmailNotFound);\n      } else {\n        console.log(e);\n        LoginView.switchConfirmToAlert(retrievePasswordModal);\n        retrievePasswordSubmit.hide();\n        ev.showEmailAlert(LoginValidatorView.messages.ProblemTryAgainLater);\n      }\n    }\n  }\n);\n"],"names":["consoleShim","console","noop","forEach","prop","xsrfCookie","$","attr","ajaxFormClientSideValidate","form","_ref","validate","url","beforeSubmit","success","error","_ref$checkXSRF","checkXSRF","addEventListener","e","_ref2","field","target","setCustomValidity","checkValidity","Nogin","disableXSRF","ajaxForm","headers","responseText","LoginView","getInputForInitialFocus","getLoginModal","retrievePasswordModal","modal","show","keyboard","backdrop","retrievePasswordForm","find","getLoginForm","retrievePasswordSubmit","retrievePasswordCancel","retrieveLostPasswordEmail","getLostPasswordUsername","loginModal","getForgotPassword","getRememberMeButton","isRememberMeChecked","this","hasClass","setRetrievePasswordCancel","text","_","toggleCheckSquare","span","removeClass","addClass","switchConfirmToAlert","LoginValidatorView","getFormFields","user","pass","errorMessages","PleaseEnterValidUserName","PleaseEnterValidPassword","LoginFailure","PleaseCheckYourUserNameOrPassword","MismatchUserDataFormat","messages","LinkToResetPasswordMailed","EmailNotFound","ProblemTryAgainLater","AlertDialog","heading","body","empty","append","click","preventDefault","LoginValidator","validity","valueMissing","reportValidity","msg","EmailValidatorView","retrievePasswordAlert","addSuccess","PleaseEnterValidEmailAddress","EmailValidator","_classCallCheck","on","resetForm","hide","key","value","input","patternMismatch","fadeIn","loginForm","forgotPassword","rememberMeButton","lostPasswordUsername","retrievePasswordEmail","submit","setTimeout","focus","formData","jqForm","options","push","name","status","xhr","$form","redirect","ev","emailInput","validateEmail","hideEmailAlert","Routes","lostPassword","showEmailSuccess","showEmailAlert","log"],"mappings":"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"}