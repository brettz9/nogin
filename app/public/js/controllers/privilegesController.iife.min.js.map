{"version":3,"file":"privilegesController.iife.min.js","sources":["../polyfills/Error.js","../views/utilities/ConfirmDialog.js","../views/utilities/AlertDialog.js","../views/privileges.js","privilegesController.js"],"sourcesContent":["/* eslint-disable no-restricted-globals, no-shadow -- Polyfill */\n// For IE 5.5 (needed per `eslint-plugin-compat`)\nif (typeof Error === 'undefined') {\n  /**\n   * Error polyfill.\n   */\n  // @ts-expect-error Ok for browser\n  window.Error = class Error {};\n}\n","/* globals $ -- `$` is jQuery not ESM */\n\nconst ConfirmDialog = {\n  /**\n   * @param {{\n   *   type: string,\n   *   header: string,\n   *   body: string|Element,\n   *   cancel: string,\n   *   submit: string\n   * }} cfg\n   * @returns {import('./AlertDialog.js').JQueryWithModal}\n   */\n  populate ({\n    type,\n    header,\n    body,\n    cancel,\n    submit\n  }) {\n    const baseSel = `[data-confirm-type=\"${type}\"][data-name=modal-confirm]`;\n    /** @type {import('./AlertDialog.js').JQueryWithModal} */ (\n      $(baseSel)).modal({\n      show: false, keyboard: true, backdrop: true\n    });\n    $(`${baseSel} .modal-header [data-name=modal-title]`).text(\n      header\n    );\n    $(`${baseSel} [data-name=modal-body] p`).empty().append(\n      body\n    );\n    $(`${baseSel} .cancel`).text(cancel).on('click', () => {\n      /** @type {import('./AlertDialog.js').JQueryWithModal} */ (\n        $(baseSel)\n      ).modal('hide');\n    });\n    $(`${baseSel} .submit`).text(submit);\n    return /** @type {import('./AlertDialog.js').JQueryWithModal} */ (\n      $(baseSel)\n    );\n  },\n\n  /**\n   * @param {JQuery} confirmDialog\n   * @returns {JQuery}\n   */\n  getSubmit (confirmDialog) {\n    return confirmDialog.find('.submit');\n  }\n};\n\nexport default ConfirmDialog;\n","/* globals $ -- `$` is jQuery not ESM */\n\n/**\n * @typedef {JQuery & {\n *   modal: (showOrHide: \"show\"|\"hide\"|{\n *     show: boolean,\n *     keyboard: boolean,\n *     backdrop: boolean|\"static\"\n *   }) => JQueryWithModal\n * }} JQueryWithModal\n */\n\nconst AlertDialog = {\n  /**\n   * @param {object} cfg\n   * @param {string} cfg.heading\n   * @param {Element|string} cfg.body\n   * @param {boolean} cfg.keyboard\n   * @param {boolean|\"static\"} cfg.backdrop\n   * @returns {JQueryWithModal} `HTMLDivElement`\n   */\n  populate ({\n    heading,\n    body,\n    keyboard,\n    backdrop\n  }) {\n    const modal = /** @type {JQueryWithModal} */ (\n      $('[data-name=modal-alert]')).modal({\n      show: false, keyboard, backdrop\n    });\n    $('[data-name=modal-alert] .modal-header [data-name=modal-title]').text(\n      heading\n    );\n    $('[data-name=modal-alert] [data-name=modal-body] p').empty().append(body);\n    $('[data-name=modal-alert] button').on('click', (e) => {\n      e.preventDefault();\n      modal.modal('hide');\n    });\n    return modal;\n  }\n};\n\nexport default AlertDialog;\n","/* globals $, Nogin -- `$` is jQuery not ESM, `Nogin` is server-set */\n\nimport ConfirmDialog from './utilities/ConfirmDialog.js';\nimport AlertDialog from './utilities/AlertDialog.js';\n\nconst {_} = Nogin;\n\n/**\n * @param {object} cfg\n * @param {string} [cfg.type]\n * @param {string} [cfg.message]\n * @param {string} [cfg.privilege]\n * @param {\"error\"|\"success\"} cfg.heading\n * @returns {import('./utilities/AlertDialog.js').\n *   JQueryWithModal} `HTMLDivElement`\n */\nfunction lockedAlert ({type, message, privilege, heading}) {\n  return AlertDialog.populate({\n    heading: /** @type {string} */ (_(heading)),\n    body: message || _(\n      /** @type {string} */ (type),\n      privilege\n        ? {lb: $('<br/>')[0], privilege}\n        : {},\n      {\n        // We're accepting a variety of messages here so no big deal\n        //   if missing a line break (e.g., some even with `privilege`)\n        throwOnExtraSuppliedFormatters: false\n      }\n    ),\n    keyboard: false,\n    backdrop: 'static'\n  });\n}\n\nconst PrivilegesView = {\n  /**\n   * @param {JQuery} lockedAlertDialog\n   * @returns {JQuery} `HTMLButtonElement`\n   */\n  getLockedAlertButton (lockedAlertDialog) {\n    return lockedAlertDialog.find('button');\n  },\n\n  /**\n   * @returns {JQuery<HTMLElement>}\n   */\n  getDeletePrivileges () {\n    return $('button.deletePrivilege');\n  },\n\n  /**\n   * @returns {JQuery<HTMLElement>}\n   */\n  getRemovePrivilegeFromGroup () {\n    return $('button.removePrivilegeFromGroup');\n  },\n\n  /**\n   * @returns {import('../views/utilities/AlertDialog.js').\n  *   JQueryWithModal} `HTMLDivElement`\n  */\n  createPrivilegeModal () {\n    const createPrivilegeModal =\n      /**\n      * @type {import('../views/utilities/AlertDialog.js').\n      *   JQueryWithModal}\n      */ (\n        $('#createPrivilege')\n      );\n    createPrivilegeModal.modal({\n      show: false, keyboard: true, backdrop: true\n    });\n    return createPrivilegeModal;\n  },\n\n  /**\n   * @returns {import('../views/utilities/AlertDialog.js').\n  *   JQueryWithModal} `HTMLDivElement`\n  */\n  editPrivilegeModal () {\n    const editPrivilegeModal =\n      /**\n      * @type {import('../views/utilities/AlertDialog.js').\n      *   JQueryWithModal}\n      */ (\n        $('#editPrivilege')\n      );\n    editPrivilegeModal.modal({\n      show: false, keyboard: true, backdrop: true\n    });\n    return editPrivilegeModal;\n  },\n\n  /**\n   * @returns {import('../views/utilities/AlertDialog.js').\n   *   JQueryWithModal} `HTMLDivElement`\n   */\n  addPrivilegeToGroupModal () {\n    const addPrivilegeToGroupModal =\n      /**\n      * @type {import('../views/utilities/AlertDialog.js').\n      *   JQueryWithModal}\n      */ (\n        $('#addPrivilegeToGroup')\n      );\n    addPrivilegeToGroupModal.modal({\n      show: false, keyboard: true, backdrop: true\n    });\n    return addPrivilegeToGroupModal;\n  },\n\n  /**\n   * @param {JQuery} createPrivilegeModal `HTMLDivElement`\n   * @returns {import('../utilities/ajaxFormClientSideValidate.js').\n   *   JQueryWithAjaxForm} `HTMLFormElement`\n   */\n  createPrivilegeForm (createPrivilegeModal) {\n    return (\n      /**\n       * @type {import('../utilities/ajaxFormClientSideValidate.js').\n       * JQueryWithAjaxForm}\n       */\n      (createPrivilegeModal.find('#createPrivilege-form'))\n    );\n  },\n\n  /**\n   * @param {JQuery} editPrivilegeModal `HTMLDivElement`\n   * @returns {import('../utilities/ajaxFormClientSideValidate.js').\n  *   JQueryWithAjaxForm} `HTMLFormElement`\n  */\n  editPrivilegeForm (editPrivilegeModal) {\n    return (\n      /**\n      * @type {import('../utilities/ajaxFormClientSideValidate.js').\n      * JQueryWithAjaxForm}\n      */\n      (editPrivilegeModal.find('#editPrivilege-form'))\n    );\n  },\n\n  /**\n   * @param {JQuery} addPrivilegeToGroupModal `HTMLDivElement`\n   * @returns {import('../utilities/ajaxFormClientSideValidate.js').\n   *   JQueryWithAjaxForm} `HTMLFormElement`\n   */\n  addPrivilegeToGroupForm (addPrivilegeToGroupModal) {\n    return (\n      /**\n      * @type {import('../utilities/ajaxFormClientSideValidate.js').\n      * JQueryWithAjaxForm}\n      */\n      (addPrivilegeToGroupModal.find('#addPrivilegeToGroup-form'))\n    );\n  },\n\n  /**\n   * @param {JQuery} createPrivilegeModal `HTMLDivElement`\n   * @returns {JQuery} `HTMLButtonElement`\n   */\n  createPrivilegeSubmit (createPrivilegeModal) {\n    return createPrivilegeModal.find('[data-name=createPrivilege-submit]');\n  },\n\n  /**\n   * @param {JQuery} addPrivilegeToGroupModal `HTMLDivElement`\n   * @returns {JQuery} `HTMLButtonElement`\n   */\n  addPrivilegeToGroupSubmit (addPrivilegeToGroupModal) {\n    return addPrivilegeToGroupModal.find(\n      '[data-name=addPrivilegeToGroup-submit]'\n    );\n  },\n\n  /**\n   * @param {JQuery} editPrivilegeModal `HTMLDivElement`\n   * @returns {JQuery} `HTMLButtonElement`\n   */\n  editPrivilegeSubmit (editPrivilegeModal) {\n    return editPrivilegeModal.find('[data-name=editPrivilege-submit]');\n  },\n\n  /**\n   * @param {JQuery} createPrivilegeModal `HTMLDivElement`\n   * @returns {JQuery} `HTMLButtonElement`\n   */\n  createPrivilegeCancel (createPrivilegeModal) {\n    return createPrivilegeModal.find('[data-name=createPrivilege-cancel]');\n  },\n\n  /**\n   * @param {JQuery} addPrivilegeToGroupModal `HTMLDivElement`\n   * @returns {JQuery} `HTMLButtonElement`\n   */\n  addPrivilegeToGroupCancel (addPrivilegeToGroupModal) {\n    return addPrivilegeToGroupModal.find(\n      '[data-name=addPrivilegeToGroup-cancel]'\n    );\n  },\n\n  /**\n   * @param {JQuery} editPrivilegeModal `HTMLDivElement`\n   * @returns {JQuery} `HTMLButtonElement`\n   */\n  editPrivilegeCancel (editPrivilegeModal) {\n    return editPrivilegeModal.find('[data-name=editPrivilege-cancel]');\n  },\n\n  /**\n   * @returns {JQuery} `HTMLDivElement`\n   */\n  getCreatePrivilegeButton () {\n    return $('button.createPrivilege');\n  },\n\n  /**\n   * @returns {JQuery} `HTMLDivElement`\n   */\n  getEditPrivilegeButton () {\n    return $('button.editPrivilege');\n  },\n\n  /**\n   * @returns {JQuery} `HTMLDivElement`\n   */\n  getAddPrivilegeToGroupButton () {\n    return $('button.addPrivilegeToGroup');\n  },\n\n  /**\n   * @returns {HTMLInputElement}\n   */\n  getCreatePrivilegeName () {\n    return /** @type {HTMLInputElement} */ ($('#createPrivilege-input')[0]);\n  },\n\n  /**\n   * @returns {HTMLInputElement}\n   */\n  getCreatePrivilegeDescription () {\n    return /** @type {HTMLInputElement} */ (\n      $('#createPrivilege-description-input')[0]\n    );\n  },\n\n  /**\n   * @returns {HTMLInputElement}\n   */\n  getEditPrivilegeDescription () {\n    return /** @type {HTMLInputElement} */ (\n      $('#editPrivilege-description-input')[0]\n    );\n  },\n\n  /**\n   * @returns {HTMLInputElement}\n   */\n  getAddPrivilegeToGroupGroup () {\n    return /** @type {HTMLInputElement} */ ($('#addPrivilegeToGroup-input')[0]);\n  },\n\n  /**\n   * @returns {HTMLInputElement}\n   */\n  getEditPrivilege () {\n    return /** @type {HTMLInputElement} */ ($('#editPrivilege-input')[0]);\n  },\n\n  /**\n   * @param {string} privilege\n   * @returns {import('./utilities/AlertDialog.js').\n   *   JQueryWithModal} `HTMLDivElement`\n   */\n  setDeletePrivilege (privilege) {\n    const deletePrivilegeConfirmDialog = ConfirmDialog.populate({\n      type: 'deletePrivilege',\n      header: /** @type {string} */ (_('deletePrivilege')),\n      body: /** @type {string} */ (_('sureWantDeletePrivilege', {\n        privilege\n      })),\n      cancel: /** @type {string} */ (_('cancel')),\n      submit: /** @type {string} */ (_('delete'))\n    });\n    deletePrivilegeConfirmDialog.find('.submit').addClass('btn-danger');\n    return /** @type {import('./utilities/AlertDialog.js').JQueryWithModal} */ (\n      deletePrivilegeConfirmDialog\n    );\n  },\n\n  /**\n   * @returns {import('./utilities/AlertDialog.js').\n   *   JQueryWithModal} `HTMLDivElement`\n   */\n  setRemovePrivilegeFromGroup () {\n    const removePrivilegeFromGroupConfirmDialog = ConfirmDialog.populate({\n      type: 'removePrivilegeFromGroup',\n      header: /** @type {string} */ (_('removePrivilegeFromGroup')),\n      body: /** @type {string} */ (_('reallyWantRemovePrivilegeFromGroup')),\n      cancel: /** @type {string} */ (_('cancel')),\n      submit: /** @type {string} */ (_('delete'))\n    });\n    removePrivilegeFromGroupConfirmDialog.find(\n      '.submit'\n    ).addClass('btn-danger');\n    return /** @type {import('./utilities/AlertDialog.js').JQueryWithModal} */ (\n      removePrivilegeFromGroupConfirmDialog\n    );\n  },\n\n  /**\n   * @param {object} cfg\n   * @param {\"privilegeCreated\"|\"privilegeDeleted\"|\"privilegeEdited\"|\n   *   \"privilegeRemovedFromGroup\"|\"privilegeAddedToGroup\"} cfg.type\n   * @param {string} [cfg.privilege]\n   * @returns {import('./utilities/AlertDialog.js').\n   *   JQueryWithModal} `HTMLDivElement`\n   */\n  onShowLockedAlert ({type, privilege}) {\n    return lockedAlert({type, privilege, heading: 'success'});\n  },\n\n  /**\n   * @param {object} cfg\n   * @param {string} cfg.privilege\n   * @param {string} [cfg.message]\n   * @param {\"ErrorLoggingOut\"|\"FailureSubmittingPrivilegeInfo\"|\n   * \"SessionLost\"|\"ProblemDispatchingLink\"} [cfg.type]\n   * @returns {import('./utilities/AlertDialog.js').\n   *   JQueryWithModal} `HTMLDivElement`\n   */\n  onShowLockedErrorAlert ({type, privilege, message}) {\n    return lockedAlert({type, message, privilege, heading: 'error'});\n  },\n\n  /**\n   * @type {{[key: string]: {[key: string]: string}}}\n   */\n  errorMessages: {\n    name: {\n      PleaseEnterName: /** @type {string} */ (_('PleaseEnterName'))\n    }\n  }\n};\n\nexport default PrivilegesView;\n","/* globals $, Nogin -- `$` is jQuery not ESM, `Nogin` is server-set */\n\nimport '../polyfills/Error.js';\nimport '../polyfills/console.js';\n\nimport ConfirmDialog from '../views/utilities/ConfirmDialog.js';\nimport PrivilegesView from '../views/privileges.js';\n\n/**\n * @typedef {Error & {\n *   text: string,\n *   responseText: string,\n *   statusText?: string\n * }} AjaxPostError\n */\n\nconst xsrfCookie = $('meta[name=\"csrf-token\"]').attr('content');\n\nconst createPrivilegeButton = PrivilegesView.getCreatePrivilegeButton();\nconst createPrivilegeModal = PrivilegesView.createPrivilegeModal();\nconst createPrivilegeForm = PrivilegesView.createPrivilegeForm(\n  createPrivilegeModal\n);\n\ncreatePrivilegeForm.on('submit', function (e) {\n  e.preventDefault();\n});\ncreatePrivilegeButton.on('click', () => {\n  const createPrivilegeCancel = PrivilegesView.createPrivilegeCancel(\n    createPrivilegeModal\n  );\n\n  createPrivilegeCancel.on('click', () => {\n    createPrivilegeModal.modal('hide');\n  });\n  createPrivilegeModal.modal('show');\n\n  const createPrivilegeSubmit = PrivilegesView.createPrivilegeSubmit(\n    createPrivilegeModal\n  );\n  createPrivilegeSubmit.on('click', async () => {\n    try {\n      const privilegeToCreate = PrivilegesView.getCreatePrivilegeName();\n      if (privilegeToCreate.validity.tooShort) {\n        privilegeToCreate.setCustomValidity(\n          PrivilegesView.errorMessages.name.PleaseEnterName\n        );\n        /** @type {HTMLFormElement} */ (\n          createPrivilegeForm[0]\n        ).reportValidity();\n        return;\n      }\n      const description = PrivilegesView.getCreatePrivilegeDescription();\n      await createPrivilege(privilegeToCreate.value, description.value);\n    } catch (er) {\n      createPrivilegeModal.modal('hide');\n      const err = /** @type {AjaxPostError} */ (er);\n\n      console.log('err', err);\n\n      // Log just in case not internationalized\n      console.error(Nogin._('ErrorFormat', {\n        text: err.text,\n        statusText:\n          // istanbul ignore next\n          err.statusText ||\n          ''\n      }));\n      // However, should already be internationalized by server\n      showLockedErrorAlert({message: err.text});\n    }\n  });\n});\n\nconst editPrivilegeButton = PrivilegesView.getEditPrivilegeButton();\nconst editPrivilegeModal = PrivilegesView.editPrivilegeModal();\nconst editPrivilegeForm = PrivilegesView.editPrivilegeForm(\n  editPrivilegeModal\n);\n\neditPrivilegeForm.on('submit', function (e) {\n  e.preventDefault();\n});\neditPrivilegeButton.on('click', (e) => {\n  const privilegeName = /** @type {string} */ (e.target.dataset.privilege);\n  const descriptionVal = /** @type {string} */ (e.target.dataset.description);\n  const privilegeToEdit = PrivilegesView.getEditPrivilege();\n\n  const editPrivilegeCancel = PrivilegesView.editPrivilegeCancel(\n    editPrivilegeModal\n  );\n  editPrivilegeCancel.on('click', () => {\n    editPrivilegeModal.modal('hide');\n  });\n\n  editPrivilegeModal.modal('show');\n  privilegeToEdit.value = privilegeName;\n\n  const privilegeDescription = PrivilegesView.getEditPrivilegeDescription();\n  privilegeDescription.value = descriptionVal;\n\n  const editPrivilegeSubmit = PrivilegesView.editPrivilegeSubmit(\n    editPrivilegeModal\n  );\n  editPrivilegeSubmit.on('click', async () => {\n    try {\n      if (privilegeToEdit.validity.tooShort) {\n        privilegeToEdit.setCustomValidity(\n          PrivilegesView.errorMessages.name.PleaseEnterName\n        );\n        /** @type {HTMLFormElement} */ (editPrivilegeForm[0]).reportValidity();\n        return;\n      }\n      const newPrivilegeName = privilegeToEdit.value;\n      const description = privilegeDescription.value;\n      await editPrivilege(privilegeName, newPrivilegeName, description);\n    } catch (er) {\n      editPrivilegeModal.modal('hide');\n      const err = /** @type {AjaxPostError} */ (er);\n\n      console.log('err', err);\n\n      // Log just in case not internationalized\n      console.error(Nogin._('ErrorFormat', {\n        text: err.text,\n        statusText:\n          // istanbul ignore next\n          err.statusText ||\n          ''\n      }));\n      // However, should already be internationalized by server\n      showLockedErrorAlert({message: err.text});\n    }\n  });\n});\n\nconst addPrivilegeToGroupButton = PrivilegesView.getAddPrivilegeToGroupButton();\nconst addPrivilegeToGroupModal = PrivilegesView.addPrivilegeToGroupModal();\nconst addPrivilegeToGroupForm = PrivilegesView.addPrivilegeToGroupForm(\n  addPrivilegeToGroupModal\n);\n\naddPrivilegeToGroupForm.on('submit', function (e) {\n  e.preventDefault();\n});\naddPrivilegeToGroupButton.on('click', (e) => {\n  const privilegeToAdd = /** @type {string} */ (e.target.dataset.privilege);\n  const groupName = PrivilegesView.getAddPrivilegeToGroupGroup();\n\n  const addPrivilegeToGroupCancel = PrivilegesView.addPrivilegeToGroupCancel(\n    addPrivilegeToGroupModal\n  );\n\n  addPrivilegeToGroupCancel.on('click', () => {\n    addPrivilegeToGroupModal.modal('hide');\n  });\n  addPrivilegeToGroupModal.modal('show');\n\n  const addPrivilegeToGroupSubmit = PrivilegesView.addPrivilegeToGroupSubmit(\n    addPrivilegeToGroupModal\n  );\n  addPrivilegeToGroupSubmit.on('click', async () => {\n    try {\n      if (groupName.validity.tooShort) {\n        groupName.setCustomValidity(\n          PrivilegesView.errorMessages.name.PleaseEnterName\n        );\n        /** @type {HTMLFormElement} */ (\n          addPrivilegeToGroupForm[0]\n        ).reportValidity();\n        return;\n      }\n      await addPrivilegeToGroup(groupName.value, privilegeToAdd);\n    } catch (er) {\n      addPrivilegeToGroupModal.modal('hide');\n      const err = /** @type {AjaxPostError} */ (er);\n\n      // Log just in case not internationalized\n      console.error(Nogin._('ErrorFormat', {\n        text: err.text,\n        statusText:\n          // istanbul ignore next\n          err.statusText ||\n          ''\n      }));\n      // However, should already be internationalized by server\n      showLockedErrorAlert({message: err.text});\n    }\n  });\n});\n\n/** @type {string} */\nlet privilege;\n\n/** @type {import('../views/utilities/AlertDialog.js').JQueryWithModal} */\nlet deletePrivilegeConfirmDialog;\nPrivilegesView.getDeletePrivileges().on('click', (e) => {\n  // eslint-disable-next-line prefer-destructuring -- TS\n  privilege = /** @type {string} */ (e.target.dataset.privilege);\n\n  // handle privilege deletion\n  deletePrivilegeConfirmDialog = PrivilegesView.setDeletePrivilege(privilege);\n  ConfirmDialog.getSubmit(\n    deletePrivilegeConfirmDialog\n  ).on('click', async () => {\n    try {\n      await deletePrivilege();\n    } catch (er) {\n      const err = /** @type {AjaxPostError} */ (er);\n\n      // Log just in case not internationalized\n      console.error(Nogin._('ErrorFormat', {\n        text: err.text,\n        statusText:\n          // istanbul ignore next\n          err.statusText ||\n          ''\n      }));\n      // However, should already be internationalized by server\n      showLockedErrorAlert({message: err.text});\n    }\n  });\n  deletePrivilegeConfirmDialog.modal('show');\n});\n\nconst removePrivilegeFromGroupConfirmDialog =\n  PrivilegesView.setRemovePrivilegeFromGroup();\nPrivilegesView.getRemovePrivilegeFromGroup().on('click', (e) => {\n  const groupName = /** @type {string} */ (e.target.dataset.group);\n  const privilegeID = /** @type {string} */ (e.target.dataset.privilege);\n  ConfirmDialog.getSubmit(\n    removePrivilegeFromGroupConfirmDialog\n  ).on('click', async () => {\n    try {\n      await removePrivilegeFromGroup(groupName, privilegeID);\n    } catch (er) {\n      const err = /** @type {AjaxPostError} */ (er);\n\n      // Log just in case not internationalized\n      console.error(Nogin._('ErrorFormat', {\n        text: err.text,\n        statusText:\n          // istanbul ignore next\n          err.statusText ||\n          ''\n      }));\n      // However, should already be internationalized by server\n      showLockedErrorAlert({message: err.text});\n    }\n  });\n  removePrivilegeFromGroupConfirmDialog.modal('show');\n});\n\n/**\n * @param {string} url\n * @param {object} [data]\n * @returns {Promise<void>}\n */\nfunction post (url, data) {\n  /** @type {JQuery.AjaxSettings} */\n  const args = {\n    type: 'post',\n    headers: {\n      'X-XSRF-Token': xsrfCookie\n    }\n  };\n  if (data) {\n    args.data = data;\n  }\n\n  // eslint-disable-next-line promise/avoid-new -- our own API\n  return new Promise((resolve, reject) => {\n    $.ajax(url, args).done(resolve).fail(\n      (jqXHR /* , textStatus, errorThrown */) => {\n        const err = /** @type {AjaxPostError} */ (\n          new Error('Ajax POST error')\n        );\n        err.text = jqXHR.responseText;\n        err.responseText = jqXHR.statusText;\n        reject(err);\n      }\n    );\n  });\n  // Reenable after these related issues are fixed:\n  // https://github.com/cypress-io/cypress/issues/95\n  // https://github.com/cypress-io/cypress/issues/687\n  /*\n  const resp = await fetch(url, {\n    method: 'POST'\n  });\n  await checkErrors(resp);\n  */\n  /**\n   * @param {Response} resp\n   * @throws {Error}\n   * @returns {Promise<void>}\n   */\n  /*\n  async function checkErrors (resp) {\n    if (!resp.ok) {\n      const err = new Error();\n      err.text = await resp.text();\n      err.responseText = resp.statusText;\n      throw err;\n    }\n  }\n  */\n}\n\n/**\n * @throws {Error}\n * @param {string} groupName\n * @param {string} privilegeName\n * @returns {Promise<void>}\n */\nasync function removePrivilegeFromGroup (groupName, privilegeName) {\n  removePrivilegeFromGroupConfirmDialog.modal('hide');\n  await post(Nogin.Routes.accessAPI, {\n    verb: 'removePrivilegeFromGroup', groupName, privilegeName\n  });\n  showLockedAlertReload({type: 'privilegeRemovedFromGroup'});\n}\n\n/**\n * @param {string} privilegeToCreate\n * @param {string} description\n * @throws {Error}\n * @returns {Promise<void>}\n */\nasync function createPrivilege (privilegeToCreate, description) {\n  await post(Nogin.Routes.accessAPI, {\n    verb: 'createPrivilege',\n    privilegeName: privilegeToCreate,\n    description\n  });\n  createPrivilegeModal.modal('hide');\n  showLockedAlertReload({type: 'privilegeCreated'});\n}\n\n/**\n * @param {string} privilegeName\n * @param {string} newPrivilegeName\n * @param {string} description\n * @throws {Error}\n * @returns {Promise<void>}\n */\nasync function editPrivilege (privilegeName, newPrivilegeName, description) {\n  await post(Nogin.Routes.accessAPI, {\n    verb: 'editPrivilege', privilegeName, newPrivilegeName, description\n  });\n  editPrivilegeModal.modal('hide');\n  showLockedAlertReload({type: 'privilegeEdited'});\n}\n\n/**\n * @param {string} groupName\n * @param {string} privilegeName\n * @throws {Error}\n * @returns {Promise<void>}\n */\nasync function addPrivilegeToGroup (groupName, privilegeName) {\n  await post(Nogin.Routes.accessAPI, {\n    verb: 'addPrivilegeToGroup', groupName, privilegeName\n  });\n  addPrivilegeToGroupModal.modal('hide');\n  showLockedAlertReload({type: 'privilegeAddedToGroup'});\n}\n\n/**\n * @throws {Error}\n * @returns {Promise<void>}\n */\nasync function deletePrivilege () {\n  deletePrivilegeConfirmDialog.modal('hide');\n  await post(Nogin.Routes.accessAPI, {\n    verb: 'deletePrivilege', privilegeName: privilege\n  });\n  showLockedAlertReload({type: 'privilegeDeleted'});\n}\n\n/**\n * @param {object} cfg\n * @param {\"privilegeCreated\"|\"privilegeDeleted\"|\"privilegeEdited\"|\n *   \"privilegeRemovedFromGroup\"|\"privilegeAddedToGroup\"} cfg.type\n * @returns {void}\n */\nfunction showLockedAlertReload ({type}) {\n  const lockedAlertDialog = PrivilegesView.onShowLockedAlert({\n    type,\n    privilege\n  });\n  lockedAlertDialog.modal('show');\n  const refresh = () => {\n    // @ts-expect-error Ok\n    location.reload(true);\n  };\n  PrivilegesView.getLockedAlertButton(\n    lockedAlertDialog\n  ).on('click', refresh);\n  setTimeout(refresh, 3000);\n}\n\n/**\n * @param {object} cfg\n * @param {\"ErrorLoggingOut\"|\"SessionLost\"|\"ProblemDispatchingLink\"|\n *   \"FailureSubmittingPrivilegeInfo\"} [cfg.type]\n * @param {string} [cfg.message]\n * @returns {void}\n*/\nfunction showLockedErrorAlert ({type, message}) {\n  const lockedAlertDialog = PrivilegesView.onShowLockedErrorAlert({\n    type, message, privilege\n  });\n  lockedAlertDialog.modal('show');\n  const refresh = () => {\n    // @ts-expect-error Ok\n    location.reload(true);\n  };\n  PrivilegesView.getLockedAlertButton(\n    lockedAlertDialog\n  ).on('click', refresh);\n  setTimeout(refresh, 3000);\n}\n"],"names":["Error","window","_createClass","_classCallCheck","ConfirmDialog","populate","_ref","type","header","body","cancel","submit","baseSel","concat","$","modal","show","keyboard","backdrop","text","empty","append","on","getSubmit","confirmDialog","find","AlertDialog","heading","e","preventDefault","_","Nogin","lockedAlert","message","privilege","lb","throwOnExtraSuppliedFormatters","PrivilegesView","getLockedAlertButton","lockedAlertDialog","getDeletePrivileges","getRemovePrivilegeFromGroup","createPrivilegeModal","editPrivilegeModal","addPrivilegeToGroupModal","createPrivilegeForm","editPrivilegeForm","addPrivilegeToGroupForm","createPrivilegeSubmit","addPrivilegeToGroupSubmit","editPrivilegeSubmit","createPrivilegeCancel","addPrivilegeToGroupCancel","editPrivilegeCancel","getCreatePrivilegeButton","getEditPrivilegeButton","getAddPrivilegeToGroupButton","getCreatePrivilegeName","getCreatePrivilegeDescription","getEditPrivilegeDescription","getAddPrivilegeToGroupGroup","getEditPrivilege","setDeletePrivilege","deletePrivilegeConfirmDialog","addClass","setRemovePrivilegeFromGroup","removePrivilegeFromGroupConfirmDialog","onShowLockedAlert","_ref2","onShowLockedErrorAlert","_ref3","errorMessages","name","PleaseEnterName","_empty","deletePrivilege","_async","_await","post","Routes","accessAPI","verb","privilegeName","showLockedAlertReload","_awaitIgnored","value","direct","then","Promise","resolve","addPrivilegeToGroup","groupName","_catch","recover","result","editPrivilege","newPrivilegeName","description","f","args","i","arguments","length","apply","this","reject","createPrivilege","privilegeToCreate","removePrivilegeFromGroup","_callIgnored","_call","xsrfCookie","attr","_continueIgnored","createPrivilegeButton","validity","tooShort","setCustomValidity","reportValidity","er","err","console","log","error","statusText","showLockedErrorAlert","editPrivilegeButton","target","dataset","descriptionVal","privilegeToEdit","privilegeDescription","addPrivilegeToGroupButton","privilegeToAdd","url","data","headers","ajax","done","fail","jqXHR","responseText","refresh","location","reload","setTimeout","group","privilegeID"],"mappings":"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"}