!function(){"use strict";var e=function(){return $("#set-password-form")},t=function(){return $('[data-name="reset-pass"]')},a=function(){return $('[data-name="reset-password-submit"]')};function o(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r,n,s,i,d,u,l,c=function(e){var t=e.heading,a=e.body,o=e.keyboard,r=e.backdrop;return $("[data-name=modal-alert]").modal({show:!1,keyboard:o,backdrop:r}),$("[data-name=modal-alert] .modal-header [data-name=modal-title]").text(t),$("[data-name=modal-alert] [data-name=modal-body] p").empty().append(a),$("[data-name=modal-alert]")},h=Nogin._,f=$("#set-password"),m={setPasswordDialog:function(){return f.modal({show:!1,keyboard:!1,backdrop:"static"}),f},getSetPasswordAlert:function(){return f.find(".alert")},getLockedAlertButton:function(e){return e.find("button")},showSuccess:function(){this.addAlert(h("YourPasswordHasBeenReset"))},addAlert:function(e){this.getSetPasswordAlert().text(e)},showDanger:function(e){return"bad-session"===e?c({heading:h("error"),body:h("SessionLost",{lb:$("<br/>")[0]}),keyboard:!1,backdrop:"static"}):this.addAlert(h("SomethingWentWrongPleaseTryAgain"))},messages:{ShouldBeMinimumLength:h("ShouldBeMinimumLength")}},b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=m.setPasswordDialog(),this.alert=m.getSetPasswordAlert(),this.alert.hide()}var t,a,r;return t=e,r=[{key:"validatePassword",value:function(e){return e.setCustomValidity(""),e.validity.tooShort&&e.setCustomValidity(m.messages.ShouldBeMinimumLength),e.form.reportValidity()}}],(a=[{key:"getPasswordDialog",value:function(){return this.modal}},{key:"showAlert",value:function(e){var t=m.showDanger(e);if(t){t.modal("show");var a=function(){Nogin.redirect("root")};return m.getLockedAlertButton(t).click(a),void setTimeout(a,3e3)}this.alert.show()}},{key:"hideAlert",value:function(){this.alert.hide()}},{key:"showSuccess",value:function(){m.showSuccess(),this.alert.fadeIn(500)}}])&&o(t.prototype,a),r&&o(t,r),e}(),w=new b,g=t(),v=a(),y=e();r=y,s=(n={validate:function(){w.hideAlert(),b.validatePassword(g[0])},beforeSubmit:function(e,t,a){w.hideAlert()},success:function(e,t,a,o){v.addClass("disabled"),v.prop("disabled",!0),w.showSuccess(),setTimeout((function(){Nogin.redirect("root")}),3e3)},error:function(e){switch(e.responseText){case"bad-session":w.showAlert("bad-session");break;default:w.showAlert()}}}).validate,i=n.url,d=n.beforeSubmit,u=n.success,l=n.error,r[0].addEventListener("change",(function(e){s(e)}),!0),r[0].addEventListener("input",(function(e){var t=e.target;t.setCustomValidity(""),t.checkValidity("")}),!0),r.ajaxForm({url:i,beforeSubmit:d,success:u,error:l});var p=w.getPasswordDialog();p.on("shown.bs.modal",(function(){g[0].focus()})),p.modal("show")}();
//# sourceMappingURL=resetPasswordController.iife.min.js.map
