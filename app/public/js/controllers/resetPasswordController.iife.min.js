!function(){"use strict";var e=$('meta[name="csrf-token"]').attr("content"),t=function(){return $("#set-password-form")},o=function(){return $('[data-name="reset-pass"]')},r=function(){return $('[data-name="reset-password-submit"]')};function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}var i,s,d,u,l,c,f,m,h,b=function(e){var t=e.heading,o=e.body,r=e.keyboard,a=e.backdrop,n=$("[data-name=modal-alert]").modal({show:!1,keyboard:r,backdrop:a});return $("[data-name=modal-alert] .modal-header [data-name=modal-title]").text(t),$("[data-name=modal-alert] [data-name=modal-body] p").empty().append(o),$("[data-name=modal-alert] button").on("click",(function(e){e.preventDefault(),n.modal("hide")})),n},w=Nogin._,v=$("#set-password"),g={setPasswordDialog:function(){return v.modal({show:!1,keyboard:!1,backdrop:"static"}),v},getSetPasswordAlert:function(){return v.find(".alert")},getLockedAlertButton:function(e){return e.find("button")},showSuccess:function(){this.addAlert(w("YourPasswordHasBeenReset"))},addAlert:function(e){this.getSetPasswordAlert().text(e)},showDanger:function(e){return"bad-session"===e?b({heading:w("error"),body:w("SessionLost",{lb:$("<br/>")[0]}),keyboard:!1,backdrop:"static"}):this.addAlert(w("SomethingWentWrongPleaseTryAgain"))},messages:{ShouldBeMinimumLength:w("ShouldBeMinimumLength")}},y=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=g.setPasswordDialog(),this.alert=g.getSetPasswordAlert(),this.alert.hide()},o=[{key:"validatePassword",value:function(e){return e.setCustomValidity(""),e.validity.tooShort&&e.setCustomValidity(g.messages.ShouldBeMinimumLength),e.form.reportValidity()}}],(t=[{key:"getPasswordDialog",value:function(){return this.modal}},{key:"showAlert",value:function(e){var t=g.showDanger(e);if(t){t.modal("show");var o=function(){Nogin.redirect("root")};return g.getLockedAlertButton(t).on("click",o),void setTimeout(o,3e3)}this.alert.show()}},{key:"hideAlert",value:function(){this.alert.hide()}},{key:"showSuccess",value:function(){g.showSuccess(),this.alert.fadeIn(500)}}])&&a(e.prototype,t),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o}(),p=new y,k=o(),S=r(),A=t();i=A,d=(s={validate:function(){p.hideAlert(),y.validatePassword(k[0])},beforeSubmit:function(){p.hideAlert()},success:function(){S.addClass("disabled"),S.prop("disabled",!0),p.showSuccess(),setTimeout((function(){Nogin.redirect("root")}),3e3)},error:function(e){"bad-session"===e.responseText?p.showAlert("bad-session"):p.showAlert()}}).validate,u=s.url,l=s.beforeSubmit,c=s.success,f=s.error,m=s.checkXSRF,h=void 0===m||m,i[0].addEventListener("change",(function(e){d(e)}),!0),i[0].addEventListener("input",(function(e){var t=e.target;t.setCustomValidity(""),t.checkValidity()}),!0),!h||e||Nogin.disableXSRF?i.ajaxForm({headers:{"X-XSRF-Token":e},url:u,beforeSubmit:l,success:c,error:f}):f({responseText:"UnknownError"});var P=p.getPasswordDialog();P.on("shown.bs.modal",(function(){k[0].focus()})),P.modal("show")}();
//# sourceMappingURL=resetPasswordController.iife.min.js.map
