{"version":3,"file":"homeController.iife.min.js","sources":["../utilities/ajaxFormClientSideValidate.js","../views/utilities/ConfirmDialog.js","../views/utilities/AlertDialog.js","../views/home.js","../views/utilities/populateForm.js","../views/validators/AccountValidatorView.js","../form-validators/AccountValidator.js","homeController.js"],"sourcesContent":["const ajaxFormClientSideValidate = (form, {\n  validate,\n  // `ajaxForm` properties and methods\n  url,\n  beforeSubmit,\n  success,\n  error\n}) => {\n  // As per problem #3 at https://www.html5rocks.com/en/tutorials/forms/constraintvalidation/#toc-current-implementation-issues ,\n  //  we can't do the validation at submit, so we instead add a capturing\n  //  change listener as well as input listeners to reset the messages;\n  //  note that we can't use the `invalid` event to call `reportValidity`\n  //  after our `setCustomValidity()` (to ensure we get the bubbles showing)\n  //  as that fires further `invalid` events; and setting the form to\n  //  `novalidate` won't show the bubbles.\n  form[0].addEventListener('change', (e) => {\n    // Provide custom messages of invalidity\n    validate(e);\n  }, true);\n\n  form[0].addEventListener('input', ({target: field}) => {\n    field.setCustomValidity('');\n    field.checkValidity('');\n  }, true);\n\n  return form.ajaxForm({\n    url,\n    beforeSubmit,\n    success,\n    error\n  });\n};\n\nexport default ajaxFormClientSideValidate;\n","/* globals $ */\n\nconst ConfirmDialog = {\n  populate ({\n    type,\n    header,\n    body,\n    cancel,\n    submit\n  }) {\n    const baseSel = `[data-confirm-type=\"${type}\"][data-name=modal-confirm]`;\n    $(baseSel).modal({\n      show: false, keyboard: true, backdrop: true\n    });\n    $(`${baseSel} .modal-header [data-name=modal-title]`).text(\n      header\n    );\n    $(`${baseSel} [data-name=modal-body] p`).empty().append(\n      body\n    );\n    $(`${baseSel} .cancel`).text(cancel);\n    $(`${baseSel} .submit`).text(submit);\n    return $(baseSel);\n  },\n\n  /**\n   * @param {external:jQuery} confirmDialog\n   * @returns {external:jQuery}\n   */\n  getAccountSubmit (confirmDialog) {\n    return confirmDialog.find('.submit');\n  }\n};\n\nexport default ConfirmDialog;\n","/* globals $ */\n\nconst AlertDialog = {\n  /**\n   * @param {PlainObject} cfg\n   * @param {string} cfg.heading\n   * @param {external:jQuery} cfg.body\n   * @param {boolean} cfg.keyboard\n   * @param {boolean|\"static\"} cfg.backdrop\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  populate ({\n    heading,\n    body,\n    keyboard,\n    backdrop\n  }) {\n    $('[data-name=modal-alert]').modal({\n      show: false, keyboard, backdrop\n    });\n    $('[data-name=modal-alert] .modal-header [data-name=modal-title]').text(\n      heading\n    );\n    $('[data-name=modal-alert] [data-name=modal-body] p').empty().append(body);\n    return $('[data-name=modal-alert]');\n  }\n};\n\nexport default AlertDialog;\n","/* globals $, _ */\n\nimport ConfirmDialog from './utilities/ConfirmDialog.js';\nimport AlertDialog from './utilities/AlertDialog.js';\nimport populateForm from './utilities/populateForm.js';\n\n/**\n * @param {PlainObject} cfg\n * @param {string} [cfg.message]\n * @param {string} [cfg.type]\n * @returns {external:jQuery} `HTMLDivElement`\n */\nfunction lockedAlert ({type, message, heading}) {\n  return AlertDialog.populate({\n    heading: _(heading),\n    body: message || _(type, {\n      lb: $('<br/>')[0]\n    }),\n    keyboard: false,\n    backdrop: 'static'\n  });\n}\n\nconst HomeView = {\n  /**\n   * @returns {external:jQuery}\n   */\n  getLogoutButton () {\n    return $('[data-name=btn-logout]');\n  },\n  /**\n   * @returns {external:jQuery}\n   */\n  getName () {\n    return $('[data-name=\"name\"]');\n  },\n\n  /**\n   * @returns {external:jQuery}\n   */\n  getEmail () {\n    return $('[data-name=\"email\"]');\n  },\n\n  /**\n   * @param {external:jQuery} accountForm\n   * @returns {external:jQuery}\n   */\n  getDeleteAccountAction (accountForm) {\n    return accountForm.find('[data-name=action1]');\n  },\n\n  /**\n   * @param {external:jQuery} lockedAlertDialog\n   * @returns {external:jQuery} `HTMLButtonElement`\n   */\n  getLockedAlertButton (lockedAlertDialog) {\n    return lockedAlertDialog.find('button');\n  },\n\n  /**\n   * @param {external:jQuery} accountUpdatedAlertDialog\n   * @returns {external:jQuery} `HTMLButtonElement`\n   */\n  getAccountUpdatedButton (accountUpdatedAlertDialog) {\n    return accountUpdatedAlertDialog.find('button');\n  },\n\n  /**\n   * @returns {external:jQuery}\n   */\n  getUser () {\n    return $('[data-name=\"user\"]');\n  },\n\n  /**\n   * @param {PlainObject} cfg\n   * @param {\"AppearsChangingEmail\"} cfg.type\n   * @returns {external:jQuery} `HTMLDivElement`\n  */\n  onShowConfirmation ({type}) {\n    return ConfirmDialog.populate({\n      type: 'notice',\n      header: _('notice'),\n      body: _(type, {\n        lb: $('<br/>')[0]\n      }),\n      cancel: _('cancel'),\n      submit: _('confirm')\n    });\n  },\n\n  /**\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  setDeleteAccount () {\n    // setup the confirm window that displays when the user chooses to\n    //  delete their account\n    const deleteAccountConfirmDialog = ConfirmDialog.populate({\n      type: 'deleteAccount',\n      header: _('deleteAccount'),\n      body: _('sureWantDeleteAccount'),\n      cancel: _('cancel'),\n      submit: _('delete')\n    });\n    deleteAccountConfirmDialog.find('.submit').addClass('btn-danger');\n    return deleteAccountConfirmDialog;\n  },\n  /**\n   * @returns {external:jQuery} `HTMLFormElement`\n   */\n  setAccountSettings () {\n    const accountForm = populateForm('[data-name=account-form]', {\n      heading: _('accountSettings'),\n      subheading: _('hereAreCurrentSettings'),\n      action1: _('deleteText'),\n      action2: _('updateText')\n    });\n    accountForm.find('[data-name=action1]')\n      .removeClass('btn-outline-dark')\n      .addClass('btn-danger');\n    return accountForm;\n  },\n  /**\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  onAccountUpdated () {\n    return AlertDialog.populate({\n      heading: _('success'),\n      body: _('yourAccountHasBeenUpdated'),\n      keyboard: true,\n      backdrop: true\n    });\n  },\n\n  /**\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  onAccountUpdatedButNotYetEmail () {\n    return AlertDialog.populate({\n      heading: _('success'),\n      body: _('yourAccountHasBeenUpdatedButEmail'),\n      keyboard: true,\n      backdrop: true\n    });\n  },\n\n  /**\n   * @param {PlainObject} cfg\n   * @param {\"accountDeleted\"|\"loggedOut\"} cfg.type\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  onShowLockedAlert ({type}) {\n    return lockedAlert({type, heading: 'success'});\n  },\n\n  /**\n   * @param {PlainObject} cfg\n   * @param {string} [cfg.message]\n   * @param {\"ErrorLoggingOut\"|\"FailureSubmittingUserInfo\"|\n   * \"SessionLost\"|\"ProblemDispatchingLink\"} [cfg.type]\n   * @returns {external:jQuery} `HTMLDivElement`\n   */\n  onShowLockedErrorAlert ({type, message}) {\n    return lockedAlert({type, message, heading: 'error'});\n  }\n};\n\nexport default HomeView;\n","/* globals $ */\n\nconst populateForm = (sel, {\n  heading,\n  subheading,\n  action1,\n  action2\n}) => {\n  // customize the account settings form\n  $(sel + ' h1.dialog').text(heading);\n  $(sel + ' h2.dialog').text(subheading);\n  $(sel + ' [data-name=action1]').text(action1);\n  $(sel + ' [data-name=action2]').text(action2);\n  return $(sel);\n};\n\nexport default populateForm;\n","/* globals $, _ */\n\n/**\n* @typedef {PlainObject} AccountInfoElements\n* @property {external:jQuery} name\n* @property {external:jQuery} email\n* @property {external:jQuery} user\n* @property {external:jQuery} pass\n*/\n\nconst AccountValidatorView = {\n  /**\n   * @returns {HTMLFormElement}\n   */\n  getForm () {\n    return $('[data-name=account-form]')[0];\n  },\n\n  /**\n   * @returns {external:jQuery}\n   */\n  getUserId () {\n    return $('#userId');\n  },\n\n  /**\n   * @returns {AccountInfoElements}\n   */\n  getFormFields () {\n    return {\n      name: $('[data-name=\"name\"]')[0],\n      email: $('[data-name=\"email\"]')[0],\n      user: $('[data-name=\"user\"]')[0],\n      pass: $('[data-name=\"pass\"]')[0],\n      passConfirm: $('[data-name=\"pass-confirm\"]') &&\n        $('[data-name=\"pass-confirm\"]')[0]\n    };\n  },\n\n  /**\n   * @type {PlainObject<string,PlainObject<string,string>>}\n   */\n  errorMessages: {\n    name: {\n      PleaseEnterName: _('PleaseEnterName')\n    },\n    email: {\n      emailAddressAlreadyInUse: _('emailAddressAlreadyInUse'),\n      PleaseEnterValidEmail: _('PleaseEnterValidEmail')\n    },\n    user: {\n      userNameAlreadyInUse: _('userNameAlreadyInUse'),\n      PleaseChooseUserName: _('PleaseChooseUserName')\n    },\n    pass: {\n      PasswordMinimumLength: _('PasswordMinimumLength'),\n      PasswordsDontMatch: _('PasswordsDontMatch')\n    }\n  }\n};\n\nexport default AccountValidatorView;\n","import AccountValidatorView from '../views/validators/AccountValidatorView.js';\n\n/**\n * Ensures accounts are valid.\n */\nclass AccountValidator {\n  /**\n   * Sets up properties and methods.\n   * @param {PlainObject} cfg\n   * @param {boolean} cfg.signup\n   */\n  constructor ({signup} = {}) {\n    // build array maps of the form inputs & control groups\n    this.signup = signup;\n\n    this.form = AccountValidatorView.getForm();\n    this.formFields = AccountValidatorView.getFormFields();\n    this.userId = AccountValidatorView.getUserId();\n    this.errorMessages = AccountValidatorView.errorMessages;\n\n    this.userIsLoggedIn = (s) => {\n      // if user is logged in and hasn't changed their password, return ok\n      return this.userId.val() && s === '';\n    };\n  }\n\n  /**\n   * @returns {void}\n   */\n  showInvalidEmail () {\n    this.formFields.email.setCustomValidity(\n      this.errorMessages.email.emailAddressAlreadyInUse\n    );\n    this.form.reportValidity();\n  }\n\n  /**\n   * @returns {void}\n   */\n  showInvalidUserName () {\n    this.formFields.user.setCustomValidity(\n      this.errorMessages.user.userNameAlreadyInUse\n    );\n    this.form.reportValidity();\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  validateForm () {\n    const {name, email, user, pass, passConfirm} = this.formFields;\n    Object.values(this.formFields).forEach((field) => {\n      if (field) {\n        field.setCustomValidity('');\n      }\n    });\n    // Todo[cypress@>4.2.0]: Remove this disabling of istanbul to see if fixed\n    //   see https://github.com/cypress-io/cypress/issues/6678\n    // istanbul ignore if\n    if (name.validity.tooShort) {\n      name.setCustomValidity(this.errorMessages.name.PleaseEnterName);\n    }\n    // Todo[cypress@>4.2.0]: Remove this disabling of istanbul to see if fixed\n    //   see https://github.com/cypress-io/cypress/issues/6678\n    // istanbul ignore if\n    if (email.validity.patternMismatch) {\n      email.setCustomValidity(this.errorMessages.email.PleaseEnterValidEmail);\n    }\n    // Todo[cypress@>4.2.0]: Remove this disabling of istanbul to see if fixed\n    //   see https://github.com/cypress-io/cypress/issues/6678\n    // istanbul ignore if\n    if (user.validity.tooShort) {\n      user.setCustomValidity(this.errorMessages.user.PleaseChooseUserName);\n    }\n    // Todo[cypress@>4.2.0]: Remove this disabling of istanbul to see if fixed\n    //   see https://github.com/cypress-io/cypress/issues/6678\n    // istanbul ignore if\n    if (!this.userIsLoggedIn() && pass.validity.tooShort) {\n      pass.setCustomValidity(this.errorMessages.pass.PasswordMinimumLength);\n    }\n    if (this.signup && pass.value !== passConfirm.value) {\n      pass.setCustomValidity(this.errorMessages.pass.PasswordsDontMatch);\n    }\n    return this.form.reportValidity();\n  }\n}\n\nexport default AccountValidator;\n","/* globals $, _, NL_ROUTES */\n\nimport ajaxFormClientSideValidate from\n  '../utilities/ajaxFormClientSideValidate.js';\n\nimport ConfirmDialog from '../views/utilities/ConfirmDialog.js';\nimport HomeView from '../views/home.js';\nimport AccountValidator from '../form-validators/AccountValidator.js';\n\n// User name field\nconst name = HomeView.getName();\nname.focus();\n\n// Disable user field\nconst user = HomeView.getUser();\nuser.attr('disabled', 'disabled');\n\n// handle account deletion\nconst deleteAccountConfirmDialog = HomeView.setDeleteAccount();\nConfirmDialog.getAccountSubmit(deleteAccountConfirmDialog).click(async () => {\n  try {\n    await deleteAccount();\n  } catch (err) {\n    // Log just in case not internationalized\n    console.error(_('ErrorFormat', {\n      text: err.text,\n      statusText:\n        // istanbul ignore next\n        err.statusText ||\n        ''\n    }));\n    // However, should already be internationalized by server\n    showLockedErrorAlert({message: err.text});\n  }\n});\n\nconst logoutButton = HomeView.getLogoutButton();\n// handle user logout\nlogoutButton.click(async () => {\n  try {\n    await attemptLogout();\n  } catch (err) {\n    // Log in case actual error not internationalized\n    console.error(_('ErrorFormat', {\n      text: err.text,\n      statusText:\n        // istanbul ignore next\n        err.statusText ||\n        ''\n    }));\n    showLockedErrorAlert({type: 'ErrorLoggingOut'});\n  }\n});\n\n// confirm account deletion\nconst accountForm = HomeView.setAccountSettings();\nHomeView.getDeleteAccountAction(accountForm).click(() => {\n  deleteAccountConfirmDialog.modal('show');\n});\nsetupValidationSubmission();\n\n/**\n * @returns {boolean}\n */\nfunction emailHasChanged () {\n  const email = HomeView.getEmail();\n  return email[0].value !== email[0].defaultValue;\n}\n\n/**\n * @returns {void}\n */\nfunction setupValidationSubmission () {\n  let confirmed = false;\n  const av = new AccountValidator();\n  accountForm[0].addEventListener('submit', (e) => {\n    const submissionOkToContinue = confirmed ||\n      !emailHasChanged();\n    if (submissionOkToContinue) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const emailChangeConfirmDialog = HomeView.onShowConfirmation({\n      type: 'AppearsChangingEmail'\n    });\n    emailChangeConfirmDialog.modal('show');\n    ConfirmDialog.getAccountSubmit(emailChangeConfirmDialog).click(() => {\n      confirmed = true;\n      accountForm.submit();\n      emailChangeConfirmDialog.modal('hide');\n    });\n  }, true);\n  ajaxFormClientSideValidate(accountForm, {\n    validate () {\n      av.validateForm();\n    },\n    beforeSubmit (formData, jqForm, options) {\n      // Push the disabled username field onto the form data array\n      formData.push({\n        name: 'user', value: user.val()\n      });\n      return true;\n    },\n    success (responseText, status, xhr, $form) {\n      // \"nocontent\" (204), \"notmodified\" (304), \"parseerror\" (JSON or XML)\n      // istanbul ignore else\n      if (status === 'success') {\n        onUpdateSuccess();\n      }\n      confirmed = false; // Allow resubmission\n    },\n    error (e) {\n      confirmed = false; // Allow resubmission\n      switch (e.responseText) {\n      case 'email-taken':\n        av.showInvalidEmail();\n        break;\n      case 'session-lost': {\n        showLockedErrorAlert({type: 'SessionLost'});\n        break;\n      } case 'problem-dispatching-link': {\n        showLockedErrorAlert({type: 'ProblemDispatchingLink'});\n        break;\n      } default:\n        HomeView.onShowLockedErrorAlert({type: 'FailureSubmittingUserInfo'});\n        break;\n      }\n    }\n  });\n}\n\n/**\n * @returns {void}\n */\nfunction onUpdateSuccess () {\n  const accountUpdatedAlertDialog = emailHasChanged()\n    ? HomeView.onAccountUpdatedButNotYetEmail()\n    : HomeView.onAccountUpdated();\n  accountUpdatedAlertDialog.modal('show');\n  HomeView.getAccountUpdatedButton(accountUpdatedAlertDialog).off('click');\n}\n\n/**\n * @param {string} url\n * @returns {Promise<void>}\n */\nfunction post (url) {\n  // eslint-disable-next-line promise/avoid-new\n  return new Promise((resolve, reject) => {\n    $.ajax(url, {type: 'post'}).done(resolve).fail(\n      (jqXHR /* , textStatus, errorThrown */) => {\n        const err = new Error();\n        err.text = jqXHR.responseText;\n        err.responseText = jqXHR.statusText;\n        reject(err);\n      }\n    );\n  });\n  // Reenable after these related issues are fixed:\n  // https://github.com/cypress-io/cypress/issues/95\n  // https://github.com/cypress-io/cypress/issues/687\n  /*\n  const resp = await fetch(url, {\n    method: 'POST'\n  });\n  await checkErrors(resp);\n  */\n  /**\n   * @param {Response} resp\n   * @throws {Error}\n   * @returns {Promise<void>}\n   */\n  /*\n  async function checkErrors (resp) {\n    if (!resp.ok) {\n      const err = new Error();\n      err.text = await resp.text();\n      err.responseText = resp.statusText;\n      throw err;\n    }\n  }\n  */\n}\n\n/**\n * @throws {Error}\n * @returns {Promise<void>}\n */\nasync function deleteAccount () {\n  deleteAccountConfirmDialog.modal('hide');\n  await post(NL_ROUTES.delete);\n  showLockedAlert({type: 'accountDeleted'});\n}\n\n/**\n * @throws {Error}\n * @returns {Promise<void>}\n */\nasync function attemptLogout () {\n  await post(NL_ROUTES.logout);\n  showLockedAlert({type: 'loggedOut'});\n}\n\n/**\n * @param {PlainObject} cfg\n * @param {\"accountDeleted\"|\"loggedOut\"} cfg.type\n * @returns {void}\n */\nfunction showLockedAlert ({type}) {\n  const lockedAlertDialog = HomeView.onShowLockedAlert({type});\n  lockedAlertDialog.modal('show');\n  const redirectToRoot = () => {\n    location.href = NL_ROUTES.root;\n  };\n  HomeView.getLockedAlertButton(lockedAlertDialog).click(redirectToRoot);\n  setTimeout(redirectToRoot, 3000);\n}\n\n/**\n * @param {PlainObject} cfg\n * @param {\"ErrorLoggingOut\"} cfg.type\n * @param {string} cfg.message\n * @returns {void}\n*/\nfunction showLockedErrorAlert ({type, message}) {\n  const lockedAlertDialog = HomeView.onShowLockedErrorAlert({type, message});\n  lockedAlertDialog.modal('show');\n  const redirectToRoot = () => {\n    location.href = NL_ROUTES.root;\n  };\n  HomeView.getLockedAlertButton(lockedAlertDialog).click(redirectToRoot);\n  setTimeout(redirectToRoot, 3000);\n}\n"],"names":["ConfirmDialog","type","header","body","cancel","submit","baseSel","$","modal","show","keyboard","backdrop","text","empty","append","confirmDialog","find","AlertDialog","heading","lockedAlert","message","_","lb","HomeView","accountForm","lockedAlertDialog","accountUpdatedAlertDialog","deleteAccountConfirmDialog","addClass","sel","subheading","action1","action2","removeClass","AccountValidatorView","getForm","getUserId","getFormFields","name","email","user","pass","passConfirm","errorMessages","PleaseEnterName","emailAddressAlreadyInUse","PleaseEnterValidEmail","userNameAlreadyInUse","PleaseChooseUserName","PasswordMinimumLength","PasswordsDontMatch","AccountValidator","signup","form","formFields","userId","userIsLoggedIn","s","_this","val","setCustomValidity","this","reportValidity","Object","values","forEach","field","validity","tooShort","patternMismatch","value","focus","attr","click","deleteAccount","console","error","_context","statusText","showLockedErrorAlert","attemptLogout","_context2","confirmed","av","validate","url","beforeSubmit","success","emailHasChanged","defaultValue","post","Promise","resolve","reject","ajax","done","fail","jqXHR","err","Error","responseText","NL_ROUTES","showLockedAlert","logout","redirectToRoot","location","href","root","setTimeout","addEventListener","e","preventDefault","stopPropagation","emailChangeConfirmDialog","validateForm","formData","jqForm","options","push","status","xhr","$form","off","showInvalidEmail","target","checkValidity","ajaxForm"],"mappings":"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"}